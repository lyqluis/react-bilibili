import{V as t,av as e,bd as n,K as o}from"./index-5222d580.js";import{u as r}from"./use-resize-effect-66b1e796.js";var i={};const c=55296,s=56319,l=56320,a=127462,u=127487,d=127995,f=127999,p=65024,g=65039,x=8400,h=8447,m=8205,y=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520];function w(t){if("string"!=typeof t)throw new Error("string cannot be undefined or null");const e=[];let n=0,o=0;for(;n<t.length;)o+=C(n+o,t),b(t[n+o])&&o++,A(t[n+o])&&o++,E(t[n+o])&&o++,v(t[n+o])?o++:(e.push(t.substring(n,n+o)),n+=o,o=0);return e}function C(t,e){const n=e[t];if(!function(t){return t&&H(t[0].charCodeAt(0),c,s)}(n)||t===e.length-1)return 1;const o=n+e[t+1];let r=e.substring(t+2,t+5);return T(o)&&T(r)||function(t){return H(k(t),d,f)}(r)?4:2}function T(t){return H(k(t),a,u)}function A(t){return"string"==typeof t&&H(t.charCodeAt(0),p,g)}function E(t){return"string"==typeof t&&H(t.charCodeAt(0),x,h)}function b(t){return"string"==typeof t&&-1!==y.indexOf(t.charCodeAt(0))}function v(t){return"string"==typeof t&&t.charCodeAt(0)===m}function k(t){return(t.charCodeAt(0)-c<<10)+(t.charCodeAt(1)-l)+65536}function H(t,e,n){return t>=e&&t<=n}({get exports(){return i},set exports(t){i=t}}).exports=w,i.substr=function(t,e,n){const o=w(t);if(void 0===e)return t;if(e>=o.length)return"";const r=o.length-e;let i=e+(void 0===n?r:n);return i>e+r&&(i=void 0),o.slice(e,i).join("")};const M=window.React,P=window.React.useMemo,F=window.React.useRef,R=window.React.useState,j={direction:"end",rows:1,expandText:"",content:"",collapseText:"",stopPropagationForActionButtons:[],onContentClick:()=>{},defaultExpanded:!1},B=c=>{const s=t(j,c),l=F(null),[a,u]=R({}),[d,f]=R(s.defaultExpanded),[p,g]=R(!1),x=P((()=>i(s.content)),[s.content]);function h(t,e){return x.slice(t,e).join("")}function m(){const t=l.current;if(!t)return;if(!t.offsetParent)return;const e=window.getComputedStyle(t),n=document.createElement("div");Array.prototype.slice.apply(e).forEach((t=>{n.style.setProperty(t,e.getPropertyValue(t))})),n.style.position="fixed",n.style.left="999999px",n.style.top="999999px",n.style.zIndex="-1000",n.style.height="auto",n.style.minHeight="auto",n.style.maxHeight="auto",n.style.textOverflow="clip",n.style.whiteSpace="normal",n.style.webkitLineClamp="unset",n.style.display="block";const o=S(e.lineHeight),r=Math.floor(o*(s.rows+.5)+S(e.paddingTop)+S(e.paddingBottom));if(n.innerText=s.content,document.body.appendChild(n),n.offsetHeight<=r)g(!1);else{let t=function(e,c){if(c-e<=1)return"end"===s.direction?{leading:h(0,e)+"..."}:{tailing:"..."+h(c,o)};const l=Math.round((e+c)/2);return"end"===s.direction?n.innerText=h(0,l)+"..."+i:n.innerText=i+"..."+h(l,o),n.offsetHeight<=r?"end"===s.direction?t(l,c):t(e,l):"end"===s.direction?t(e,l):t(l,c)},e=function(t,c){if(t[1]-t[0]<=1&&c[1]-c[0]<=1)return{leading:h(0,t[0])+"...",tailing:"..."+h(c[1],o)};const s=Math.floor((t[0]+t[1])/2),l=Math.ceil((c[0]+c[1])/2);return n.innerText=h(0,s)+"..."+i+"..."+h(l,o),n.offsetHeight<=r?e([s,t[1]],[c[0],l]):e([t[0],s],[l,c[1]])};g(!0);const o=s.content.length,i=d?s.collapseText:s.expandText,c=Math.floor((0+o)/2),l="middle"===s.direction?e([0,c],[c,o]):t(0,o);u(l)}document.body.removeChild(n)}r(m,l),e((()=>{m()}),[s.content,s.direction,s.rows,s.expandText,s.collapseText]);const y=p&&s.expandText?n(s.stopPropagationForActionButtons,M.createElement("a",{onClick:()=>{f(!0)}},s.expandText)):null,w=p&&s.collapseText?n(s.stopPropagationForActionButtons,M.createElement("a",{onClick:()=>{f(!1)}},s.collapseText)):null;return o(s,M.createElement("div",{ref:l,className:"adm-ellipsis",onClick:t=>{t.target===t.currentTarget&&s.onContentClick(t)}},p?d?M.createElement(M.Fragment,null,s.content,w):M.createElement(M.Fragment,null,a.leading,y,a.tailing):s.content))};function S(t){if(!t)return 0;const e=t.match(/^\d*(\.\d*)?/);return e?Number(e[0]):0}export{B as E};
