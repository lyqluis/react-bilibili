import{au as e,V as t,O as a,Q as s,av as i,R as r,aw as n,K as c,T as l,M as o,ax as d,U as f}from"./index-b58dd535.js";import{b as m}from"./bound-6644a254.js";import{u}from"./use-resize-effect-141f9116.js";import{t as p}from"./traverse-react-node-7b3dd3aa.js";const h=window.React.useEffect;const v=window.React,y=window.React.useRef,k="adm-tabs",b={activeLineMode:"auto",stretch:!0},w=f((f=>{var w;const g=t(b,f),L=y(null),$=y(null),E={};let M=null;const x=[];p(g.children,((e,t)=>{if(!v.isValidElement(e))return;const a=e.key;if("string"!=typeof a)return;0===t&&(M=a);const s=x.push(e);E[a]=s-1}));const[O,N]=a({value:g.activeKey,defaultValue:null!==(w=g.defaultActiveKey)&&void 0!==w?w:M,onChange:e=>{var t;null!==e&&(null===(t=g.onChange)||void 0===t||t.call(g,e))}}),[{x:R,width:W},C]=s((()=>({x:0,width:0,config:{tension:300,clamp:!0}}))),[{scrollLeft:j},A]=s((()=>({scrollLeft:0,config:{tension:300,clamp:!0}}))),[{leftMaskOpacity:K,rightMaskOpacity:T},V]=s((()=>({leftMaskOpacity:0,rightMaskOpacity:0,config:{clamp:!0}})));function S(e=!1){const t=L.current;if(!t)return;const a=E[O];if(void 0===a)return void C.start({x:0,width:0,immediate:!0});const s=$.current;if(!s)return;const i=t.children.item(a+1),r=i.children.item(0),n=r.offsetLeft,c=r.offsetWidth,l=i.offsetLeft,o=i.offsetWidth,d=t.offsetWidth,f=t.scrollWidth,u=t.scrollLeft,p=s.offsetWidth;let h=0,v=0;"auto"===g.activeLineMode?(h=n,v=c):"full"===g.activeLineMode?(h=l,v=o):h=n+(c-p)/2,C.start({x:h,width:v,immediate:e});if(f-d<=0)return;const y=m(n-(d-c)/2,0,f-d);A.start({scrollLeft:y,from:{scrollLeft:u},immediate:e})}i((()=>{S(!R.isAnimating)}),[]),r((()=>{S()}),[O]),u((()=>{S(!R.isAnimating)}),L),function(t,a,s){const i=e(t);h((()=>{const e=new MutationObserver((()=>{i()}));if(a.current)return e.observe(a.current,s),()=>{e.disconnect()}}),[a])}((()=>{S(!R.isAnimating)}),L,{subtree:!0,childList:!0,characterData:!0});const{run:z}=n(((e=!1)=>{const t=L.current;if(!t)return;const a=t.scrollLeft,s=a>0,i=a+t.offsetWidth<t.scrollWidth;V.start({leftMaskOpacity:s?1:0,rightMaskOpacity:i?1:0,immediate:e})}),{wait:100,trailing:!0,leading:!0});return i((()=>{z(!0)}),[]),c(g,v.createElement("div",{className:k},v.createElement("div",{className:`${k}-header`},v.createElement(l.div,{className:o(`${k}-header-mask`,`${k}-header-mask-left`),style:{opacity:K}}),v.createElement(l.div,{className:o(`${k}-header-mask`,`${k}-header-mask-right`),style:{opacity:T}}),v.createElement(l.div,{className:`${k}-tab-list`,ref:L,scrollLeft:j,onScroll:z,role:"tablist"},v.createElement(l.div,{ref:$,className:`${k}-tab-line`,style:{width:"fixed"===g.activeLineMode?"var(--fixed-active-line-width, 30px)":W,x:R}}),x.map((e=>c(e.props,v.createElement("div",{key:e.key,className:o(`${k}-tab-wrapper`,{[`${k}-tab-wrapper-stretch`]:g.stretch})},v.createElement("div",{onClick:()=>{const{key:t}=e;e.props.disabled||null!=t&&N(t.toString())},className:o(`${k}-tab`,{[`${k}-tab-active`]:e.key===O,[`${k}-tab-disabled`]:e.props.disabled}),role:"tab","aria-selected":e.key===O},e.props.title))))))),x.map((e=>{if(void 0===e.props.children)return null;const t=e.key===O;return v.createElement(d,{key:e.key,active:t,forceRender:e.props.forceRender,destroyOnClose:e.props.destroyOnClose},v.createElement("div",{className:`${k}-content`,style:{display:t?"block":"none"}},e.props.children))}))))}),{Tab:()=>null});export{w as T};
